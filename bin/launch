#!/usr/bin/env sh
set -e
program=$(path | fzf \
	--bind "tab:replace-query" \
	--bind "enter:replace-query+print-query"
)
desktop_entry=$(find /usr/share/applications /usr/local/share/applications -name "*$program.desktop")
if [ -z "$desktop_entry" ]; then
	echo foot $program
elif grep -q -e "Terminal=true" -e "Terminal=1" "$desktop_entry"; then
	echo foot $program
else
	echo $program
fi
